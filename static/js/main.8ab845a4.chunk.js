(this["webpackJsonpgithub-search"]=this["webpackJsonpgithub-search"]||[]).push([[0],{13:function(e,t,n){e.exports=n(27)},18:function(e,t,n){},19:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(3),s=n.n(c),u=(n(18),n(19),n(20),n(2)),l=function(e){var t,n,r;return e.userIsSelected&&(t=e.userInfo.following.map((function(e){return a.a.createElement("span",{key:e.id,className:"info-item"},a.a.createElement("a",{href:e.html_url},e.login))})),n=e.userInfo.followers.map((function(e){return a.a.createElement("span",{key:e.id,className:"info-item"},a.a.createElement("a",{href:e.html_url},e.login))})),r=e.userInfo.repositories.map((function(e){return a.a.createElement("span",{key:e.id,className:"info-item"},a.a.createElement("a",{href:e.owner.html_url},e.name))}))),e.userIsSelected&&a.a.createElement("div",{className:"user-info"},a.a.createElement("img",{src:e.userInfo.avatar,alt:e.userInfo.login,className:"img-fluid img"}),a.a.createElement("h2",null,e.userInfo.login),a.a.createElement("div",{className:"following"},a.a.createElement("h4",null,"Following"),t),a.a.createElement("div",{className:"followers"},a.a.createElement("h4",null,"Followers"),n),a.a.createElement("div",{className:"repositories"},a.a.createElement("h4",null,"Repositories"),r))},i=l=Object(u.b)((function(e){return{userInfo:e.selectedUser,userIsSelected:e.userIsSelected}}),null)(l),o=n(5),m=n(1),g=function(e,t){return{type:"ADD-USERS",users:e,isUpdate:t}},f=function(e){return{type:"SET-CURRENT-PAGE",page:e}},E=function(e){return{type:"TOGGLE-FETCHING",isFetching:e}},h={usersList:[],selectedUser:{avatar:null,login:null,following:[],followers:[],repositories:[]},searchValue:"",currentPage:null,userIsSelected:!1,pageSize:20,usersCount:null,isFetching:!1},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE-SEARCH-VALUE":return Object(m.a)(Object(m.a)({},e),{},{searchValue:t.value});case"SET-CURRENT-PAGE":return Object(m.a)(Object(m.a)({},e),{},{currentPage:t.page});case"ADD-USERS":return t.isUpdate?Object(m.a)(Object(m.a)({},e),{},{usersList:Object(o.a)(t.users)}):Object(m.a)(Object(m.a)({},e),{},{usersList:[].concat(Object(o.a)(e.usersList),Object(o.a)(t.users))});case"SET-USER-COUNT":return Object(m.a)(Object(m.a)({},e),{},{usersCount:t.count});case"SELECT-USER":return Object(m.a)(Object(m.a)({},e),{},{selectedUser:Object(m.a)({},t.user),userIsSelected:!0});case"TOGGLE-FETCHING":return Object(m.a)(Object(m.a)({},e),{},{isFetching:t.isFetching});default:return e}},d="https://api.github.com/",b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return fetch("".concat(d,"search/users?q=").concat(e,"&per_page=").concat(n,"&page=").concat(t)).then((function(e){return e.json()}))},v=function(e){return a.a.createElement("div",{className:"user-item",onClick:function(){(function(e){var t=["".concat(d,"users/").concat(e,"/following"),"".concat(d,"users/").concat(e,"/followers"),"".concat(d,"users/").concat(e,"/repos")].map((function(e){return fetch(e)}));return Promise.all(t).then((function(e){return Promise.all(e.map((function(e){return e.json()})))}))})(e.login).then((function(t){e.selectUser({avatar:e.avatar,login:e.login,following:t[0],followers:t[1],repositories:t[2]})}))}},a.a.createElement("div",{className:"card",style:{width:"18rem"}},a.a.createElement("img",{src:e.avatar,className:"card-img-top",alt:e.login}),a.a.createElement("div",{className:"card-body"},a.a.createElement("p",{className:"card-text"},e.login))))},S=v=Object(u.b)(null,(function(e){return{selectUser:function(t){return e(function(e){return{type:"SELECT-USER",user:e}}(t))}}}))(v),C=function(e){var t=e.usersCount/e.pageSize<=e.currentPage,n=e.usersList.map((function(e){return a.a.createElement(S,{key:e.id,login:e.login,avatar:e.avatar_url})}));return e.isFetching?a.a.createElement("div",{className:"user-list"},a.a.createElement("div",{className:"spinner-border",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading..."))):a.a.createElement("div",{className:"user-list"},n,a.a.createElement("div",{className:"w-100"}),t||null==e.currentPage?null:a.a.createElement("button",{className:"btn btn-dark btn-lg",onClick:function(){e.setCurrentPage(e.currentPage+1),e.toggleFetching(!0),t||b(e.searchValue,e.currentPage+1,e.pageSize).then((function(t){e.setUsers(t.items,!1),e.toggleFetching(!1)}))}},"Show more"))},N=C=Object(u.b)((function(e){return{usersList:e.usersList,currentPage:e.currentPage,searchValue:e.searchValue,pageSize:e.pageSize,usersCount:e.usersCount,isFetching:e.isFetching}}),(function(e){return{setUsers:function(t,n){return e(g(t,n))},setCurrentPage:function(t){return e(f(t))},toggleFetching:function(t){return e(E(t))}}}))(C),O=n(12),j=function(e){var t=Object(r.createRef)(),n=Object(O.a)(b,500);return console.log(e.usersCount),a.a.createElement("div",{className:"search-line"},a.a.createElement("input",{type:"text",placeholder:"Write user name",ref:t,value:e.searchValue,onChange:function(){var r=t.current.value;e.changeSearchValue(r),e.setCurrentPage(1),r&&(e.toggleFetching(!0),n(r,1,e.pageSize).then((function(t){e.setUsersCount(t.total_count),e.setUsers(t.items,!0),e.toggleFetching(!1)})))}}),a.a.createElement("div",{className:"user-count"},e.usersCount?"Total user count:"+e.usersCount:null))},U=j=Object(u.b)((function(e){return{currentPage:e.currentPage,searchValue:e.searchValue,pageSize:e.pageSize,usersCount:e.usersCount,isFetching:e.isFetching}}),(function(e){return{setUsers:function(t,n){return e(g(t,n))},changeSearchValue:function(t){return e(function(e){return{type:"CHANGE-SEARCH-VALUE",value:e}}(t))},setCurrentPage:function(t){return e(f(t))},setUsersCount:function(t){return e(function(e){return{type:"SET-USER-COUNT",count:e}}(t))},toggleFetching:function(t){return e(E(t))}}}))(j);var w=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("h1",{className:"display-4"},"GitHub Search App"),a.a.createElement(U,null),a.a.createElement("main",null,a.a.createElement(N,null),a.a.createElement(i,null)))},F=n(4),P=Object(F.b)(p);s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(u.a,{store:P},a.a.createElement(w,null))),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.8ab845a4.chunk.js.map